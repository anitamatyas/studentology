<div class="settings-container">
  <div class="settings-wrapper">
    <div class="profile-pic-wrapper">
      <img [src]="loggedInUser?.profilePic" alt="Profile Picture" class="profile-pic">
      <button mat-icon-button (click)="toggleEditMode('profilePic')">
        <mat-icon>edit</mat-icon>
      </button>
      <input *ngIf="editMode.profilePic" type="file" (change)="handleProfilePicChange($event)">
    </div>
    <div class="username-wrapper">
      <h3>Username</h3>
      <span *ngIf="!editMode.username">{{ loggedInUser.username }}</span>
      <input *ngIf="editMode.username" [formControl]="profileForm.get('username')" (blur)="saveChanges('username')">
      <button mat-icon-button (click)="toggleEditMode('username')">
        <mat-icon>edit</mat-icon>
      </button>
    </div>
    <div class="email-wrapper">
      <h3>Email</h3>
      <span *ngIf="!editMode.email">{{ loggedInUser.email }}</span>
      <input *ngIf="editMode.email" [formControl]="profileForm.get('email')" (blur)="saveChanges('email')">
      <button mat-icon-button (click)="toggleEditMode('email')">
        <mat-icon>edit</mat-icon>
      </button>
    </div>
    <div class="theme-wrapper">
      <h3>Theme</h3>
      <div class="theme-picker">
        <div *ngFor="let theme of themes | keyvalue" (click)="changeTheme(theme.key)" [ngStyle]="{'background-color': theme.value.primary}"  class="theme-selector"></div>
      </div>
    </div>
  </div>
</div>